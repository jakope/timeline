var Zt=Object.defineProperty;var zt=(w,y,I)=>y in w?Zt(w,y,{enumerable:!0,configurable:!0,writable:!0,value:I}):w[y]=I;var H=(w,y,I)=>(zt(w,typeof y!="symbol"?y+"":y,I),I),vt=(w,y,I)=>{if(!y.has(w))throw TypeError("Cannot "+I)};var W=(w,y,I)=>(vt(w,y,"read from private field"),I?I.call(w):y.get(w)),it=(w,y,I)=>{if(y.has(w))throw TypeError("Cannot add the same private member more than once");y instanceof WeakSet?y.add(w):y.set(w,I)},P=(w,y,I,et)=>(vt(w,y,"write to private field"),et?et.call(w,I):y.set(w,I),I);(function(w,y){typeof exports=="object"&&typeof module<"u"?module.exports=y():typeof define=="function"&&define.amd?define(y):(w=typeof globalThis<"u"?globalThis:w||self,w.$timeline=y())})(this,function(){var q,J,N,Q,G;"use strict";function w(o){return{all:o=o||new Map,on:function(n,t){var a=o.get(n);a?a.push(t):o.set(n,[t])},off:function(n,t){var a=o.get(n);a&&(t?a.splice(a.indexOf(t)>>>0,1):o.set(n,[]))},emit:function(n,t){var a=o.get(n);a&&a.slice().map(function(v){v(t)}),(a=o.get("*"))&&a.slice().map(function(v){v(n,t)})}}}var y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},I="Expected a function",et=0/0,gt="[object Symbol]",pt=/^\s+|\s+$/g,xt=/^[-+]0x[0-9a-f]+$/i,Ct=/^0b[01]+$/i,yt=/^0o[0-7]+$/i,bt=parseInt,Mt=typeof y=="object"&&y&&y.Object===Object&&y,Ot=typeof self=="object"&&self&&self.Object===Object&&self,Tt=Mt||Ot||Function("return this")(),Dt=Object.prototype,wt=Dt.toString,St=Math.max,_t=Math.min,ht=function(){return Tt.Date.now()};function kt(o,n,t){var a,v,f,p,l,c,d=0,b=!1,h=!1,C=!0;if(typeof o!="function")throw new TypeError(I);n=ct(n)||0,rt(t)&&(b=!!t.leading,h="maxWait"in t,f=h?St(ct(t.maxWait)||0,n):f,C="trailing"in t?!!t.trailing:C);function u(O){var E=a,R=v;return a=v=void 0,d=O,p=o.apply(R,E),p}function M(O){return d=O,l=setTimeout(z,n),b?u(O):p}function e(O){var E=O-c,R=O-d,S=n-E;return h?_t(S,f-R):S}function _(O){var E=O-c,R=O-d;return c===void 0||E>=n||E<0||h&&R>=f}function z(){var O=ht();if(_(O))return j(O);l=setTimeout(z,e(O))}function j(O){return l=void 0,C&&a?u(O):(a=v=void 0,p)}function A(){l!==void 0&&clearTimeout(l),d=0,a=c=v=l=void 0}function K(){return l===void 0?p:j(ht())}function F(){var O=ht(),E=_(O);if(a=arguments,v=this,c=O,E){if(l===void 0)return M(c);if(h)return l=setTimeout(z,n),u(c)}return l===void 0&&(l=setTimeout(z,n)),p}return F.cancel=A,F.flush=K,F}function Yt(o,n,t){var a=!0,v=!0;if(typeof o!="function")throw new TypeError(I);return rt(t)&&(a="leading"in t?!!t.leading:a,v="trailing"in t?!!t.trailing:v),kt(o,n,{leading:a,maxWait:n,trailing:v})}function rt(o){var n=typeof o;return!!o&&(n=="object"||n=="function")}function It(o){return!!o&&typeof o=="object"}function jt(o){return typeof o=="symbol"||It(o)&&wt.call(o)==gt}function ct(o){if(typeof o=="number")return o;if(jt(o))return et;if(rt(o)){var n=typeof o.valueOf=="function"?o.valueOf():o;o=rt(n)?n+"":n}if(typeof o!="string")return o===0?o:+o;o=o.replace(pt,"");var t=Ct.test(o);return t||yt.test(o)?bt(o.slice(2),t?2:8):xt.test(o)?et:+o}var ut=Yt,lt={exports:{}};(function(o,n){(function(t,a){o.exports=a()})(y,function(){var t=1e3,a=6e4,v=36e5,f="millisecond",p="second",l="minute",c="hour",d="day",b="week",h="month",C="quarter",u="year",M="date",e="Invalid Date",_=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,z=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,j={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(m){var r=["th","st","nd","rd"],i=m%100;return"["+m+(r[(i-20)%10]||r[i]||r[0])+"]"}},A=function(m,r,i){var $=String(m);return!$||$.length>=r?m:""+Array(r+1-$.length).join(i)+m},K={s:A,z:function(m){var r=-m.utcOffset(),i=Math.abs(r),$=Math.floor(i/60),s=i%60;return(r<=0?"+":"-")+A($,2,"0")+":"+A(s,2,"0")},m:function m(r,i){if(r.date()<i.date())return-m(i,r);var $=12*(i.year()-r.year())+(i.month()-r.month()),s=r.clone().add($,h),x=i-s<0,g=r.clone().add($+(x?-1:1),h);return+(-($+(i-s)/(x?s-g:g-s))||0)},a:function(m){return m<0?Math.ceil(m)||0:Math.floor(m)},p:function(m){return{M:h,y:u,w:b,d,D:M,h:c,m:l,s:p,ms:f,Q:C}[m]||String(m||"").toLowerCase().replace(/s$/,"")},u:function(m){return m===void 0}},F="en",O={};O[F]=j;var E=function(m){return m instanceof ot},R=function m(r,i,$){var s;if(!r)return F;if(typeof r=="string"){var x=r.toLowerCase();O[x]&&(s=x),i&&(O[x]=i,s=x);var g=r.split("-");if(!s&&g.length>1)return m(g[0])}else{var T=r.name;O[T]=r,s=T}return!$&&s&&(F=s),s||!$&&F},S=function(m,r){if(E(m))return m.clone();var i=typeof r=="object"?r:{};return i.date=m,i.args=arguments,new ot(i)},D=K;D.l=R,D.i=E,D.w=function(m,r){return S(m,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var ot=function(){function m(i){this.$L=R(i.locale,null,!0),this.parse(i)}var r=m.prototype;return r.parse=function(i){this.$d=function($){var s=$.date,x=$.utc;if(s===null)return new Date(NaN);if(D.u(s))return new Date;if(s instanceof Date)return new Date(s);if(typeof s=="string"&&!/Z$/i.test(s)){var g=s.match(_);if(g){var T=g[2]-1||0,Y=(g[7]||"0").substring(0,3);return x?new Date(Date.UTC(g[1],T,g[3]||1,g[4]||0,g[5]||0,g[6]||0,Y)):new Date(g[1],T,g[3]||1,g[4]||0,g[5]||0,g[6]||0,Y)}}return new Date(s)}(i),this.$x=i.x||{},this.init()},r.init=function(){var i=this.$d;this.$y=i.getFullYear(),this.$M=i.getMonth(),this.$D=i.getDate(),this.$W=i.getDay(),this.$H=i.getHours(),this.$m=i.getMinutes(),this.$s=i.getSeconds(),this.$ms=i.getMilliseconds()},r.$utils=function(){return D},r.isValid=function(){return this.$d.toString()!==e},r.isSame=function(i,$){var s=S(i);return this.startOf($)<=s&&s<=this.endOf($)},r.isAfter=function(i,$){return S(i)<this.startOf($)},r.isBefore=function(i,$){return this.endOf($)<S(i)},r.$g=function(i,$,s){return D.u(i)?this[$]:this.set(s,i)},r.unix=function(){return Math.floor(this.valueOf()/1e3)},r.valueOf=function(){return this.$d.getTime()},r.startOf=function(i,$){var s=this,x=!!D.u($)||$,g=D.p(i),T=function(tt,B){var X=D.w(s.$u?Date.UTC(s.$y,B,tt):new Date(s.$y,B,tt),s);return x?X:X.endOf(d)},Y=function(tt,B){return D.w(s.toDate()[tt].apply(s.toDate("s"),(x?[0,0,0,0]:[23,59,59,999]).slice(B)),s)},k=this.$W,U=this.$M,V=this.$D,L="set"+(this.$u?"UTC":"");switch(g){case u:return x?T(1,0):T(31,11);case h:return x?T(1,U):T(0,U+1);case b:var nt=this.$locale().weekStart||0,st=(k<nt?k+7:k)-nt;return T(x?V-st:V+(6-st),U);case d:case M:return Y(L+"Hours",0);case c:return Y(L+"Minutes",1);case l:return Y(L+"Seconds",2);case p:return Y(L+"Milliseconds",3);default:return this.clone()}},r.endOf=function(i){return this.startOf(i,!1)},r.$set=function(i,$){var s,x=D.p(i),g="set"+(this.$u?"UTC":""),T=(s={},s[d]=g+"Date",s[M]=g+"Date",s[h]=g+"Month",s[u]=g+"FullYear",s[c]=g+"Hours",s[l]=g+"Minutes",s[p]=g+"Seconds",s[f]=g+"Milliseconds",s)[x],Y=x===d?this.$D+($-this.$W):$;if(x===h||x===u){var k=this.clone().set(M,1);k.$d[T](Y),k.init(),this.$d=k.set(M,Math.min(this.$D,k.daysInMonth())).$d}else T&&this.$d[T](Y);return this.init(),this},r.set=function(i,$){return this.clone().$set(i,$)},r.get=function(i){return this[D.p(i)]()},r.add=function(i,$){var s,x=this;i=Number(i);var g=D.p($),T=function(U){var V=S(x);return D.w(V.date(V.date()+Math.round(U*i)),x)};if(g===h)return this.set(h,this.$M+i);if(g===u)return this.set(u,this.$y+i);if(g===d)return T(1);if(g===b)return T(7);var Y=(s={},s[l]=a,s[c]=v,s[p]=t,s)[g]||1,k=this.$d.getTime()+i*Y;return D.w(k,this)},r.subtract=function(i,$){return this.add(-1*i,$)},r.format=function(i){var $=this,s=this.$locale();if(!this.isValid())return s.invalidDate||e;var x=i||"YYYY-MM-DDTHH:mm:ssZ",g=D.z(this),T=this.$H,Y=this.$m,k=this.$M,U=s.weekdays,V=s.months,L=function(B,X,ft,at){return B&&(B[X]||B($,x))||ft[X].slice(0,at)},nt=function(B){return D.s(T%12||12,B,"0")},st=s.meridiem||function(B,X,ft){var at=B<12?"AM":"PM";return ft?at.toLowerCase():at},tt={YY:String(this.$y).slice(-2),YYYY:this.$y,M:k+1,MM:D.s(k+1,2,"0"),MMM:L(s.monthsShort,k,V,3),MMMM:L(V,k),D:this.$D,DD:D.s(this.$D,2,"0"),d:String(this.$W),dd:L(s.weekdaysMin,this.$W,U,2),ddd:L(s.weekdaysShort,this.$W,U,3),dddd:U[this.$W],H:String(T),HH:D.s(T,2,"0"),h:nt(1),hh:nt(2),a:st(T,Y,!0),A:st(T,Y,!1),m:String(Y),mm:D.s(Y,2,"0"),s:String(this.$s),ss:D.s(this.$s,2,"0"),SSS:D.s(this.$ms,3,"0"),Z:g};return x.replace(z,function(B,X){return X||tt[B]||g.replace(":","")})},r.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},r.diff=function(i,$,s){var x,g=D.p($),T=S(i),Y=(T.utcOffset()-this.utcOffset())*a,k=this-T,U=D.m(this,T);return U=(x={},x[u]=U/12,x[h]=U,x[C]=U/3,x[b]=(k-Y)/6048e5,x[d]=(k-Y)/864e5,x[c]=k/v,x[l]=k/a,x[p]=k/t,x)[g]||k,s?U:D.a(U)},r.daysInMonth=function(){return this.endOf(h).$D},r.$locale=function(){return O[this.$L]},r.locale=function(i,$){if(!i)return this.$L;var s=this.clone(),x=R(i,$,!0);return x&&(s.$L=x),s},r.clone=function(){return D.w(this.$d,this)},r.toDate=function(){return new Date(this.valueOf())},r.toJSON=function(){return this.isValid()?this.toISOString():null},r.toISOString=function(){return this.$d.toISOString()},r.toString=function(){return this.$d.toUTCString()},m}(),$t=ot.prototype;return S.prototype=$t,[["$ms",f],["$s",p],["$m",l],["$H",c],["$W",d],["$M",h],["$y",u],["$D",M]].forEach(function(m){$t[m[1]]=function(r){return this.$g(r,m[0],m[1])}}),S.extend=function(m,r){return m.$i||(m(r,ot,S),m.$i=!0),S},S.locale=R,S.isDayjs=E,S.unix=function(m){return S(1e3*m)},S.en=O[F],S.Ls=O,S.p={},S})})(lt);const dt=lt.exports;var mt={exports:{}};(function(o,n){(function(t,a){o.exports=a()})(y,function(){var t="minute",a=/[+-]\d\d(?::?\d\d)?/g,v=/([+-]|\d\d)/g;return function(f,p,l){var c=p.prototype;l.utc=function(e){var _={date:e,utc:!0,args:arguments};return new p(_)},c.utc=function(e){var _=l(this.toDate(),{locale:this.$L,utc:!0});return e?_.add(this.utcOffset(),t):_},c.local=function(){return l(this.toDate(),{locale:this.$L,utc:!1})};var d=c.parse;c.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),d.call(this,e)};var b=c.init;c.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else b.call(this)};var h=c.utcOffset;c.utcOffset=function(e,_){var z=this.$utils().u;if(z(e))return this.$u?0:z(this.$offset)?h.call(this):this.$offset;if(typeof e=="string"&&(e=function(F){F===void 0&&(F="");var O=F.match(a);if(!O)return null;var E=(""+O[0]).match(v)||["-",0,0],R=E[0],S=60*+E[1]+ +E[2];return S===0?0:R==="+"?S:-S}(e),e===null))return this;var j=Math.abs(e)<=16?60*e:e,A=this;if(_)return A.$offset=j,A.$u=e===0,A;if(e!==0){var K=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(A=this.local().add(j+K,t)).$offset=j,A.$x.$localOffset=K}else A=this.utc();return A};var C=c.format;c.format=function(e){var _=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return C.call(this,_)},c.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var u=c.toDate;c.toDate=function(e){return e==="s"&&this.$offset?l(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():u.call(this)};var M=c.diff;c.diff=function(e,_,z){if(e&&this.$u===e.$u)return M.call(this,e,_,z);var j=this.local(),A=l(e).local();return M.call(j,A,_,z)}}})})(mt);const Wt=mt.exports;dt.extend(Wt);const Z=(o,n="HH:mm")=>dt.utc(o*1e3).format(n);function At({pointWidth:o,timePerPixel:n,timeSpacing:t,screenScaleCount:a,scaleSpacing:v,scaleHeight:f,startTime:p,drawLine:l,drawText:c}){if(console.log("startTime",p),t===1){for(let d=0;d<a;d++){const b=d*v+o/2,h=Math.ceil(p+d*t);if(!(h<=0)){if(h%10===0){l(b,f.height5),c(b,f.height5+13,`${Z(h,"HH:mm:ss")}`);continue}if(h%5===0){l(b,f.height3);continue}if(h%1===0){l(b,f.height1);continue}}}return}if(t===10){const d=+Z(p,"s")%10,b=d/n;for(let h=0;h<a;h++){const C=h*v-b-o/2,u=Math.ceil(p+h*t-d);if(!(u<=0)){if(u%60===0){l(C,f.height4),c(C,f.height5+13,`${Z(u,"HH:mm")}`);continue}if(u%10===0){l(C,f.height1);continue}}}return}if(t===30){const d=+Z(p,"s")%30,b=d/n;for(let h=0;h<a;h++){const C=h*v-b-o/2,u=Math.ceil(p+h*t-d);if(!(u<=0)){if(u%(60*5)===0){l(C,f.height4),c(C,f.height5+13,`${Z(u,"HH:mm")}`);continue}if(u%30===0){l(C,f.height1);continue}}}return}if(t===60){const d=+Z(p,"s")%60,b=d/n;for(let h=0;h<a;h++){const C=h*v-b-o/2,u=Math.ceil(p+h*t-d);if(!(u<=0)){if(u%(60*60)===0){l(C,f.height5),c(C,f.height5+13,`${Z(u)}`);continue}if(u%(60*5)===0){l(C,f.height3),u%(60*10)===0&&c(C,f.height5+13,`${Z(u,"HH:mm")}`);continue}if(u%60===0){l(C,f.height1);continue}}}return}if(t===120){const d=Z(p,"m:s").split(":"),h=(+d[0]*60+ +d[1])%120,C=h/n;for(let u=0;u<a;u++){const M=u*v-C-o/2,e=Math.ceil(p+u*t-h);if(!(e<=0)){if(e%(60*30)===0){l(M,f.height5),c(M,f.height5+13,`${Z(e)}`);continue}if(e%(60*10)===0){l(M,f.height3);continue}if(e%(60*2)===0){l(M,f.height1);continue}}}return}if(t===300){const d=Z(p,"m:s").split(":"),h=(+d[0]*60+ +d[1])%300,C=h/n;for(let u=0;u<a;u++){const M=u*v-C-o/2,e=Math.ceil(p+u*t-h);if(!(e<=0)){if(e%(60*60)===0){l(M,f.height5),c(M,f.height5+13,`${Z(e)}`);continue}if(e%(60*30)===0){l(M,f.height3);continue}if(e%(60*5)===0){l(M,f.height1);continue}}}return}if(t===600){const d=Z(p,"m:s").split(":"),h=(+d[0]*60+ +d[1])%600,C=h/n;for(let u=0;u<a;u++){const M=u*v-C-o/2,e=Math.ceil(p+u*t-h);if(!(e<=0)){if(e%(60*60)===0){l(M,f.height5),c(M,f.height5+13,`${Z(e)}`);continue}if(e%(60*30)===0){l(M,f.height3);continue}if(e%(60*5)===0){l(M,f.height1);continue}}}return}}const Et={fill:!1,bgColor:"rgba(0,0,0,0.5)",textColor:"#ffffff",scaleColor:"#ffffff",areaBgColor:"#ffffff55",pointColor:"#00aeec",pointWidth:3,scaleSpacing:7,fps:30,zoom:2,maxZoom:8,minZoom:1};class Ut{constructor(n,t){H(this,"$canvas");H(this,"canvasContext");it(this,q,void 0);H(this,"currentTime");H(this,"areas");it(this,J,void 0);it(this,N,void 0);H(this,"scaleSpacing");H(this,"bgColor");it(this,Q,void 0);H(this,"pointWidth");H(this,"pointColor");H(this,"textColor");H(this,"scaleColor");H(this,"areaBgColor");it(this,G,void 0);H(this,"fps");if(!n)throw new Error("canvas id is required!");this.$canvas=document.getElementById(n),this.canvasContext=this.$canvas.getContext("2d");const{fill:a,width:v,height:f,bgColor:p,textColor:l,scaleColor:c,areaBgColor:d,pointColor:b,pointWidth:h,scaleSpacing:C,fps:u,zoom:M,maxZoom:e,minZoom:_}={...Et,...t};if(M<_||M>e||M%1!==0)throw new Error(`zoom must be minZoom ~ maxZoom(${_} ~1 ${e}), and must be an integer`);if(e<1||e>7||e%1!==0)throw new Error("maxZoom must be 1 ~ 7, and must be an integer");if(_<1||_>7||_%1!==0)throw new Error("minZoom must be 1 ~ 7, and must be an integer");if(e<_)throw new Error("maxZoom must be greater than minZoom");if(a){const j=this.$canvas.parentElement;this.$canvas.width=j.clientWidth,this.$canvas.height=j.clientHeight,new ResizeObserver(ut(this._onParentResize.bind(this),200)).observe(j)}else v&&(this.$canvas.width=v),f&&(this.$canvas.height=f);P(this,G,!1),P(this,q,w()),this.currentTime=0;const z=[1,10,30,60,120,300,600];P(this,J,[]);for(let j=_-1;j<e;j++)W(this,J).push(z[j]);P(this,N,z[M-1]),this.scaleSpacing=C,P(this,Q,{height6:this.$canvas.height/2,height5:this.$canvas.height/3,height4:this.$canvas.height/4,height3:this.$canvas.height/5,height2:this.$canvas.height/8,height1:this.$canvas.height/10}),this.bgColor=p,this.pointWidth=h,this.pointColor=b,this.textColor=l,this.scaleColor=c,this.areaBgColor=d,this.fps=u}draw({currentTime:n,areas:t,_privateFlag:a}={}){if(W(this,G)&&!a)return;this.currentTime=n||Math.floor(0),this.areas=t||[];const v=Math.ceil(this.$canvas.width/this.scaleSpacing),f=v*W(this,N),p=this.currentTime-f/2,l=this.currentTime+f/2,c=this.$canvas.width/2,d=f/this.$canvas.width;this.clear(),this.drawArea(0,0,this.$canvas.width,this.$canvas.height,this.bgColor),this.areas.forEach(b=>{const h=b.startTime<p?0:Math.floor((b.startTime-p)/d),C=b.endTime>l?this.$canvas.width:Math.floor((b.endTime-p)/d);this.drawArea(h,0,C,this.$canvas.height,b.bgColor||this.areaBgColor)}),At.bind(this)({pointWidth:this.pointWidth,timePerPixel:d,scaleHeight:W(this,Q),scaleSpacing:this.scaleSpacing,timeSpacing:W(this,N),screenScaleCount:v,startTime:p,drawLine:this.drawLine.bind(this),drawText:this.drawText.bind(this)}),this.drawTimelineScale(W(this,N)),this.drawLine(c-this.pointWidth/2,this.$canvas.height,this.pointWidth,this.pointColor),this.drawArea(c-54,4,c+54,18,this.pointColor),this.drawText(c,6,`${Z(this.currentTime,"HH:mm:ss")}`,this.textColor,"center","top"),this.$canvas.onwheel=this._onZoom.bind(this),this.$canvas.onmousedown=this._onDrag.bind(this)}_onDrag({clientX:n}){P(this,G,!0);let t=0;document.onmousemove=ut(a=>{const v=a.clientX-n;let f=this.currentTime-W(this,N)/this.scaleSpacing*(v-t);f=Math.max(f,0),t=v,this.draw({currentTime:Math.round(f),areas:this.areas,_privateFlag:!0})},W(this,N)===1?100:1e3/this.fps),document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null,P(this,G,!1),this.emit("timeUpdate",this.currentTime)}}_onZoom(n){n.preventDefault();const t=W(this,J).findIndex(a=>a===W(this,N));n.deltaY<0&&t>0?(P(this,N,W(this,J)[t-1]),this.draw({currentTime:this.currentTime,areas:this.areas,_privateFlag:!0})):n.deltaY>0&&t<W(this,J).length-1&&(P(this,N,W(this,J)[t+1]),this.draw({currentTime:this.currentTime,areas:this.areas,_privateFlag:!0}))}_onParentResize(){const n=this.$canvas.parentNode;!n||(this.$canvas.width=n.clientWidth,this.$canvas.height=n.clientHeight,P(this,Q,{height6:this.$canvas.height/2,height5:this.$canvas.height/3,height4:this.$canvas.height/4,height3:this.$canvas.height/5,height2:this.$canvas.height/8,height1:this.$canvas.height/10}),this.draw({currentTime:this.currentTime,areas:this.areas}))}clear(){this.canvasContext&&this.canvasContext.clearRect(0,0,this.$canvas.width,this.$canvas.height),this.$canvas&&(this.$canvas.onwheel=null,this.$canvas.onmousedown=null)}drawTimelineScale(n){let t="";switch(n){case 1:t="1s";break;case 10:t="10s";break;case 30:t="30s";break;case 60:t="1min";break;case 120:t="2min";break;case 300:t="5min";break;case 600:t="10min";break}this.drawText(this.scaleSpacing+12,9,`${t}`,this.textColor,"left","middle"),this.canvasContext.beginPath(),this.canvasContext.moveTo(5,6),this.canvasContext.lineTo(5,10),this.canvasContext.lineTo(this.scaleSpacing+7,10),this.canvasContext.lineTo(this.scaleSpacing+7,6),this.canvasContext.strokeStyle=this.scaleColor,this.canvasContext.lineWidth=1.5,this.canvasContext.stroke()}drawLine(n,t,a=1,v=this.scaleColor){this.canvasContext.beginPath(),this.canvasContext.moveTo(n,this.$canvas.height),this.canvasContext.lineTo(n,this.$canvas.height-t),this.canvasContext.closePath(),this.canvasContext.strokeStyle=v,this.canvasContext.lineWidth=a,this.canvasContext.stroke()}drawText(n,t,a,v=this.textColor,f="center",p="alphabetic"){this.canvasContext.beginPath(),this.canvasContext.font="11px Arial",this.canvasContext.fillStyle=v,this.canvasContext.textAlign=f,this.canvasContext.textBaseline=p,this.canvasContext.fillText(a,n,t)}drawArea(n,t,a,v,f){this.canvasContext.beginPath(),this.canvasContext.rect(n,t,a-n,v-t),this.canvasContext.fillStyle=f,this.canvasContext.fill()}on(n,t){W(this,q).on(n,t)}off(n,t){W(this,q).off(n,t)}emit(...n){W(this,q).emit(...n)}}return q=new WeakMap,J=new WeakMap,N=new WeakMap,Q=new WeakMap,G=new WeakMap,Ut});
